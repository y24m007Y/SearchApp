{% extends "layout.html" %}
{% block content %}
<a href="{{url_for("main_bp.search_page")}}">検索画面に戻る</a>
{% if query %}
    <h1>Search result :{{query}}</h1> <br>
    {% if results %}
        <div class="container">
        {% for result in results %}
                <h3><a href="{{result.url}}" onclick="click_url('{{query}}', '{{result.title}}', '{{loop.index}}')" target="_blank">{{result.title}}</a></h3>
                {% for tag in result.tags %}
                <label class="checkbox-label">
                    {{ tag }}
                </label>
                {% endfor %}
                <details>
                    <summary class="summarized">文書概要</summary>
                    <p class="article_heading">{{result.heading}}</p>
                </details>
        {% endfor %}
        </div>
        <div class="container">
        <h2>検索結果から得られた推薦タグ</h2>
        <form action="/result_page" method="post" id="add_tags">
            <button type="submit">タグリストにタグを追加</button>
            <br>
            {% for tag in taglist %}
            <input type="checkbox" name="add_tags" value={{tag}} id="tag-{{loop.index}}">
            <label for="tag-{{loop.index}}" class="checkbox-label">{{ tag }}</label>
            {% endfor %}
        </form>
        </div>
    {% else %}
        <h2>No result founds</h2>
    {% endif %}
{% endif %}
<script src="{{ url_for('static', filename='javascript/form.js')}}"
{% endblock %}
